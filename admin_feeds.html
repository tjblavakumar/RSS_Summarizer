{% extends "admin_base.html" %}

{% block admin_content %}
<h3 class="neon-text mb-4"><i class="bi bi-rss me-2"></i>RSS Feeds</h3>
<form method="POST" action="{{ url_for('add_feed') }}" class="mb-4 glass p-4 rounded-4">
    <div class="mb-3">
        <label class="form-label text-info">Feed Name</label>
        <input type="text" class="form-control rounded-pill" name="name" placeholder="Enter feed name" required>
    </div>
    <div class="mb-3">
        <label class="form-label text-info">RSS Feed URL</label>
        <input type="url" class="form-control rounded-pill" name="url" placeholder="https://example.com/rss.xml" required>
    </div>
    <div class="mb-3">
        <label class="form-label text-info">Access Key (Optional)</label>
        <input type="text" class="form-control rounded-pill" name="access_key" placeholder="Enter access key if required">
    </div>
    <button type="submit" class="btn btn-liquid rounded-pill px-4"><i class="bi bi-plus-circle me-2"></i>Add Feed</button>
</form>

<div class="row">
    {% for feed in feeds %}
    <div class="col-12 mb-3">
        <div class="glass rounded-4 p-4 d-flex justify-content-between align-items-center">
            <div class="flex-grow-1">
                <h5 class="mb-2 fw-bold">{{ feed.name }}</h5>
                {% if feed.access_key %}
                <span class="badge rounded-pill px-3 py-2 mb-2" style="background: rgba(124, 58, 237, 0.3); color: var(--liquid-secondary); border: 1px solid var(--liquid-secondary);" title="Access Key Configured">
                    <i class="bi bi-key me-1"></i>Secured
                </span>
                {% endif %}
                <div class="text-info">
                    <i class="bi bi-link-45deg me-1"></i>
                    <a href="{{ feed.url }}" target="_blank" class="text-decoration-none" style="color: var(--liquid-primary);">{{ feed.url }}</a>
                </div>
            </div>
            <div class="d-flex gap-2">
                <a href="{{ url_for('toggle_feed', feed_id=feed.id) }}" 
                   class="btn btn-sm rounded-pill px-3 {% if feed.active %}btn-liquid{% else %}btn-liquid-outline{% endif %}">
                    <i class="bi bi-{% if feed.active %}check-circle{% else %}pause-circle{% endif %} me-1"></i>
                    {% if feed.active %}Active{% else %}Inactive{% endif %}
                </a>
                <a href="{{ url_for('delete_feed', feed_id=feed.id) }}" 
                   class="btn btn-sm btn-liquid-outline rounded-pill px-3" 
                   style="border-color: #ff6b6b; color: #ff6b6b;"
                   onclick="return confirm('Are you sure you want to delete this feed?')">
                    <i class="bi bi-trash me-1"></i>Delete
                </a>
            </div>
        </div>
    </div>
    {% endfor %}
</div>
{% endblock %}